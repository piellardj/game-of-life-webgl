var Page;!function(e){!function(e){var r=document.getElementById("error-messages");function n(e){return r.querySelector("span[id=error-message-"+e+"]")}r||console.error("Cannot find element 'error-messages'."),e.setErrorMessage=function(e,o){if(r){var a=n(e);if(a)return void(a.innerHTML=o);var t=document.createElement("span");t.id="error-message-"+e,t.innerText=o,r.appendChild(t),r.appendChild(document.createElement("br"))}},e.removeErrorMessage=function(e){if(r){var o=n(e);if(o){var a=o.nextElementSibling;a&&r.removeChild(a),r.removeChild(o)}}}}(e.Demopage||(e.Demopage={}))}(Page||(Page={}));
var Page;!function(e){!function(e){!function(e){var r="page",t=function(){function e(r){this.queryParameters={};var t=r.indexOf(e.queryDelimiter);if(t<0)this.baseUrl=r;else{this.baseUrl=r.substring(0,t);for(var a=0,n=r.substring(t+e.queryDelimiter.length).split(e.parameterDelimiter);a<n.length;a++){var i=n[a],o=i.split(e.keyValueDelimiter);if(2===o.length){var l=decodeURIComponent(o[0]),s=decodeURIComponent(o[1]);this.queryParameters[l]=s}else console.log("Unable to parse query string parameter '"+i+"'.")}}}return e.prototype.setQueryParameter=function(e,r){null===r?delete this.queryParameters[e]:this.queryParameters[e]=r},e.prototype.loopOnParameters=function(e,r){for(var t=0,a=Object.keys(this.queryParameters);t<a.length;t++){var n=a[t];if(0===n.indexOf(e)&&n.length>e.length){var i=this.queryParameters[n];r(n.substring(e.length),i)}}},e.prototype.buildUrl=function(){for(var r=[],t=0,a=Object.keys(this.queryParameters);t<a.length;t++){var n=a[t],i=this.queryParameters[n],o=encodeURIComponent(n),l=encodeURIComponent(i);r.push(o+e.keyValueDelimiter+l)}var s=r.join(e.parameterDelimiter);return s?this.baseUrl+e.queryDelimiter+s:this.baseUrl},e.queryDelimiter="?",e.parameterDelimiter="&",e.keyValueDelimiter="=",e}();function a(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.join(":")+":"}function n(e){window.history.replaceState("","",e)}e.loopOnParameters=function(e,n){var i=new t(window.location.href),o=a(r,e);i.loopOnParameters(o,n)},e.setQueryParameter=function(e,i,o){var l=new t(window.location.href),s=a(r,e);l.setQueryParameter(s+i,o),n(l.buildUrl())},e.removeQueryParameter=function(e,i){var o=new t(window.location.href),l=a(r,e);o.setQueryParameter(l+i,null),n(o.buildUrl())}}(e.URL||(e.URL={}))}(e.Helpers||(e.Helpers={}))}(Page||(Page={}));
var Page;!function(o){!function(o){o.setVisibility=function(o,n){var t,e,r=(t="div#control-"+o,(e=document.querySelector(t))||console.error("Cannot find control '"+t+"'."),e);r&&(r.style.display=n?"":"none")}}(o.Controls||(o.Controls={}))}(Page||(Page={}));
var Page;!function(e){!function(t){function n(e){var t="input[type=checkbox][id="+e+"]",n=document.querySelector(t);return n||console.error("Cannot find checkbox '"+t+"'."),n}var r;!function(t){var r="checkbox",c="true",o="false";t.attachStorageEvents=function(){for(var t=document.querySelectorAll("div.checkbox > input[type=checkbox][id]"),n=function(n){var a=t[n];a.addEventListener("change",function(){var t=a.checked?c:o;e.Helpers.URL.setQueryParameter(r,a.id,t)})},a=0;a<t.length;a++)n(a)},t.applyStoredState=function(){e.Helpers.URL.loopOnParameters(r,function(t,a){var i=n(t);!i||a!==c&&a!==o?(console.log("Removing invalid query parameter '"+t+"="+a+"'."),e.Helpers.URL.removeQueryParameter(r,t)):i.checked=a===c})}}(r||(r={})),r.applyStoredState(),r.attachStorageEvents(),t.addObserver=function(e,t){var r=n(e);return!!r&&(r.addEventListener("change",function(e){e.stopPropagation(),t(r.checked)},!1),!0)},t.setChecked=function(e,t){var r=n(e);r&&(r.checked=!!t)},t.isChecked=function(e){var t=n(e);return!!t&&t.checked}}(e.Checkbox||(e.Checkbox={}))}(Page||(Page={}));
var Page;!function(e){!function(n){function t(e){var n="input[type=range][id="+e+"]",t=document.querySelector(n);return t||console.error("Cannot find range '"+n+"'."),t}var r,a=16;function o(e,n){n.textContent=e.value;var t=document.body.getBoundingClientRect(),r=e.getBoundingClientRect(),o=n.getBoundingClientRect(),i=0;+e.max>+e.min&&(i=(+e.value-+e.min)/(+e.max-+e.min));var u=r.top-o.height-t.top-4,l=i*(r.width-a)+(r.left+.5*a)-t.left;n.style.top=u+"px",n.style.left=l-.5*o.width+"px"}function i(e,n,r){var a=t(e);return!!a&&(a.addEventListener(r,function(e){e.stopPropagation(),n(+a.value)},!1),!0)}window.addEventListener("load",function(){for(var e=document.querySelectorAll(".tooltip"),n=function(n){var t,r=e[n],a=r.previousElementSibling;(t=a).type&&"range"===t.type.toLowerCase()&&(a.parentNode.addEventListener("mouseenter",function(){o(a,r)},!1),a.addEventListener("input",function(){o(a,r)},!1))},t=0;t<e.length;t++)n(t)}),function(n){var r="range";n.attachStorageEvents=function(){for(var n=document.querySelectorAll("div.range input.slider[type=range][id]"),t=function(t){var a=n[t];a.addEventListener("change",function(){e.Helpers.URL.setQueryParameter(r,a.id,a.value)})},a=0;a<n.length;a++)t(a)},n.applyStoredState=function(){e.Helpers.URL.loopOnParameters(r,function(n,a){t(n)?l(n,+a):(console.log("Removing invalid query parameter '"+n+"="+a+"'."),e.Helpers.URL.removeQueryParameter(r,n))})}}(r||(r={})),r.applyStoredState(),r.attachStorageEvents();var u=!!window.MSInputMethodContext&&!!document.documentMode;function l(e,n){var r=t(e);r&&(r.value=""+n)}n.addObserver=function(e,n){return i(e,n,u?"change":"input")},n.addLazyObserver=function(e,n){return i(e,n,"change")},n.getValue=function(e){var n=t(e);return n?+n.value:null},n.setValue=l}(e.Range||(e.Range={}))}(Page||(Page={}));
var Page;!function(n){!function(n){function t(n){var t="button[id="+n+"]",e=document.querySelector(t);return e||console.error("Cannot find button '"+n+"'."),e}n.addObserver=function(n,e){var o=t(n);return!!o&&(o.addEventListener("click",function(n){n.stopPropagation(),e()},!1),!0)},n.setLabel=function(n,e){var o=t(n);o&&(o.innerText=e)}}(n.Button||(n.Button={}))}(Page||(Page={}));
var Page;!function(e){!function(t){var r,n="-id";function a(e){var t="div.tabs[id="+e+n+"]",r=document.querySelector(t);return r||console.error("Cannot find tabs '"+t+"'."),r}function o(e){for(var t=[],r=e.querySelectorAll("input"),n=0;n<r.length;n++){var a=r[n];a.checked&&t.push(a.value)}return t}function l(e,t){for(var r=a(e),n=r.querySelectorAll("input"),o=0;o<n.length;o++)n[o].checked=!1;for(var l=0,u=t;l<u.length;l++){var i=e+"-"+u[l]+"-id";r.querySelector("input[id="+i+"]").checked=!0}}!function(t){var r="tabs",u=";";t.attachStorageEvents=function(){for(var t=document.querySelectorAll("div.tabs[id]"),a=function(a){var l=t[a],i=l.id;if(-1!==i.indexOf(n,i.length-n.length))for(var c=i.substring(0,i.length-n.length),v=function(){var t=o(l).join(u);e.Helpers.URL.setQueryParameter(r,c,t)},s=l.querySelectorAll("input"),d=0;d<s.length;d++)s[d].addEventListener("change",v)},l=0;l<t.length;l++)a(l)},t.applyStoredState=function(){e.Helpers.URL.loopOnParameters(r,function(t,n){var o=n.split(u);a(t)?l(t,o):(console.log("Removing invalid query parameter '"+t+"="+n+"'."),e.Helpers.URL.removeQueryParameter(r,t))})}}(r||(r={})),r.applyStoredState(),r.attachStorageEvents(),t.addObserver=function(e,t){var r=a(e);if(r){for(var n=r.querySelectorAll("input"),l=0;l<n.length;l++)n[l].addEventListener("change",function(e){e.stopPropagation(),t(o(r))},!1);return!0}return!1},t.getValues=function(e){var t=a(e);return t?o(t):[]},t.setValues=l}(e.Tabs||(e.Tabs={}))}(Page||(Page={}));
var Page;!function(e){!function(n){function t(e){var n=document.querySelector(e);return n||console.error("Cannot find element '"+e+"'."),n}function o(e){return t("input[type=checkbox][id="+e+"]")}var i=document.getElementById("canvas-container"),r=t("canvas[id="+"canvas"+"]"),c=document.getElementById("canvas-buttons-column"),a=o("fullscreen-checkbox-id"),u=o("side-pane-checkbox-id"),s=i.querySelector(".loader"),l=512,d=512;function f(){var e=r.getBoundingClientRect();return[Math.floor(e.width),Math.floor(e.height)]}!function(){function e(e){document.body.style.overflow=e?"hidden":"auto"}a&&(window.addEventListener("load",function(){e(a.checked),a.addEventListener("change",function(){e(a.checked)})},!1),u&&a.addEventListener("change",function(){a.checked&&(u.checked=!1)},!1))}();var v=[0,0],h=[];function g(e){return e+"px"}function m(){i.style.width="100vw";var e=f();if(a.checked?(i.style.height="100%",i.style.maxWidth="",i.style.maxHeight=""):(e[1]=e[0]*d/l,i.style.height=g(e[1]),i.style.maxWidth=g(l),i.style.maxHeight=g(d)),e[0]!==v[0]||e[1]!==v[1]){v=f();for(var n=0,t=h;n<t.length;n++){(0,t[n])(v[0],v[1])}}}window.addEventListener("load",m,!1),a.addEventListener("change",m,!1),window.addEventListener("resize",m,!1);var p,y,E,w,L=[m],k=[],M=[],b=[],C=[],S=[],Y=[],x=[];function X(e,n){var t=r.getBoundingClientRect();return[(e-t.left)/t.width,(n-t.top)/t.height]}a&&a.addEventListener("change",function(){for(var e=a.checked,n=0,t=L;n<t.length;n++){(0,t[n])(e)}},!1),document.addEventListener("keydown",function(e){27===e.keyCode&&n.toggleFullscreen(!1)}),function(e){var n=[],t=!1;function o(e,t){n[0]=e,n[1]=t}function i(e,n){var i=X(e,n);o(i[0],i[1]),t=!0;for(var r=0,c=k;r<c.length;r++){(0,c[r])()}}function c(){if(t){t=!1;for(var e=0,n=M;e<n.length;e++){(0,n[e])()}}}function a(e,o){var i=X(e,o),r=i[0]-n[0],c=i[1]-n[1];if(n[0]=i[0],n[1]=i[1],t)for(var a=0,u=b;a<u.length;a++){(0,u[a])(r,c)}for(var s=0,l=C;s<l.length;s++){(0,l[s])(i[0],i[1])}}e.getMousePosition=function(){return n.slice()},e.setMousePosition=o,e.isMouseDown=function(){return t},e.mouseDown=i,e.mouseUp=c,e.mouseMove=a,r&&(r.addEventListener("mousedown",function(e){0===e.button&&i(e.clientX,e.clientY)},!1),r.addEventListener("mouseenter",function(){for(var e=0,n=S;e<n.length;e++){(0,n[e])()}},!1),r.addEventListener("mouseleave",function(){for(var e=0,n=Y;e<n.length;e++){(0,n[e])()}},!1),r.addEventListener("wheel",function(e){if(x.length>0){for(var t=e.deltaY>0?1:-1,o=0,i=x;o<i.length;o++){(0,i[o])(t,n)}return e.preventDefault(),!1}return!0},!1),window.addEventListener("mousemove",function(e){a(e.clientX,e.clientY)}),window.addEventListener("mouseup",function(e){0===e.button&&c()}))}(p||(p={})),function(e){var n=[],t=0;function o(e,n){var t=e.clientX-n.clientX,o=e.clientY-n.clientY;return Math.sqrt(t*t+o*o)}r&&(r.addEventListener("touchstart",function(e){for(var i=0===n.length,r=0;r<e.changedTouches.length;++r){for(var c=e.changedTouches[r],a=!1,u=0,s=n;u<s.length;u++){var l=s[u];if(c.identifier===l.id){a=!0;break}}a||n.push({id:c.identifier,clientX:c.clientX,clientY:c.clientY})}if(i&&n.length>0){var d=n[0];p.mouseDown(d.clientX,d.clientY)}else 2===n.length&&(t=o(n[0],n[1]))},!1),window.addEventListener("touchend",function(e){for(var t=n.length>0,o=0;o<e.changedTouches.length;++o)for(var i=e.changedTouches[o],r=0;r<n.length;++r)i.identifier===n[r].id&&(n.splice(r,1),r--);if(1===n.length){var c=X(n[0].clientX,n[0].clientY);p.setMousePosition(c[0],c[1])}else t&&0===n.length&&p.mouseUp()}),window.addEventListener("touchmove",function(e){for(var i=e.changedTouches,r=0;r<i.length;++r)for(var c=i[r],a=0,u=n;a<u.length;a++){var s=u[a];c.identifier===s.id&&(s.clientX=c.clientX,s.clientY=c.clientY)}var l=C.length+b.length;if(p.isMouseDown()&&l>0&&e.preventDefault(),1===n.length)p.mouseMove(n[0].clientX,n[0].clientY);else if(2===n.length){var d=o(n[0],n[1]),f=(t-d)/t;t=d;for(var v=X(.5*(n[0].clientX+n[1].clientX),.5*(n[0].clientY+n[1].clientY)),h=0,g=x;h<g.length;h++)(0,g[h])(5*f,v)}},{passive:!1}))}(y||(y={})),function(e){var n={};e.getIndicatorSpan=function(e){if(!n[e]){var o=e+"-indicator-id";n[e]=t("#"+o+" span")}return n[e]}}(E||(E={})),function(n){var t="canvas",o="fullscreen",i="sidepane",r="true",c="false";function s(n,o){var i=o?r:c;e.Helpers.URL.setQueryParameter(t,n,i)}n.attachStorageEvents=function(){a&&a.addEventListener("change",function(){s(o,a.checked),e.Helpers.URL.removeQueryParameter(t,i)}),u&&u.addEventListener("change",function(){s(i,u.checked)})},n.applyStoredState=function(){e.Helpers.URL.loopOnParameters(t,function(n,s){n!==o||s!==r&&s!==c?n!==i||s!==r&&s!==c?(console.log("Removing invalid query parameter '"+n+"="+s+"'."),e.Helpers.URL.removeQueryParameter(t,n)):u&&(u.checked=s===r):a&&(a.checked=s===r)})}}(w||(w={})),w.applyStoredState(),w.attachStorageEvents(),n.Observers=Object.freeze({canvasResize:h,fullscreenToggle:L,mouseDown:k,mouseDrag:b,mouseEnter:S,mouseLeave:Y,mouseMove:C,mouseWheel:x,mouseUp:M}),n.getAspectRatio=function(){var e=f();return e[0]/e[1]},n.getCanvas=function(){return r},n.getCanvasContainer=function(){return i},n.getSize=function(){return f()},n.getMousePosition=function(){return p.getMousePosition()},n.isFullScreen=function(){return a&&a.checked},n.isMouseDown=function(){return p.isMouseDown()},n.setIndicatorText=function(e,n){var t=E.getIndicatorSpan(e);t&&(t.innerText=n)},n.setIndicatorsVisibility=function(e){document.getElementById("indicators").style.display=e?"block":"none"},n.setMaxSize=function(e,n){l=e,d=n,m()},n.setResizable=function(e){c.style.display=e?"block":"none"},n.setLoaderText=function(e){s&&(s.querySelector("span").innerText=e)},n.showLoader=function(e){s&&(s.style.display=e?"block":"")},n.toggleFullscreen=function(e){if(a&&e!==a.checked)if(a.checked=e,"function"==typeof window.CustomEvent)a.dispatchEvent(new CustomEvent("change"));else if("function"==typeof CustomEvent.prototype.initCustomEvent){var n=document.createEvent("CustomEvent");n.initCustomEvent("change",!1,!1,void 0),a.dispatchEvent(n)}}}(e.Canvas||(e.Canvas={}))}(Page||(Page={}));
Page.Canvas.setMaxSize(512,512);