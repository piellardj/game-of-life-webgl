const Demopage=function(){const e=document.getElementById("error-messages");function n(n){return e.querySelector("span[id=error-message-"+n+"]")}return e||console.error("Cannot find element 'error-messages'."),Object.freeze({setErrorMessage:function(r,t){if(e){const o=n(r);if(o)return void(o.innerHTML=t);{const n=document.createElement("span");n.id="error-message-"+r,n.innerText=t,e.appendChild(n),e.appendChild(document.createElement("br"))}}},removeErrorMessage:function(r){if(e){const t=n(r);if(t){const n=t.nextElementSibling;n&&e.removeChild(n),e.removeChild(t)}}}})}();
const Canvas=function(){function e(e){const n=document.querySelector(e);return n||console.error("Cannot find element '"+e+"'."),n}function n(n){return e("input[type=checkbox][id="+n+"]")}const t=document.getElementById("canvas-container"),c=e("canvas[id="+"canvas"+"]");const i=document.getElementById("canvas-buttons-column"),o=n("fullscreen-checkbox-id"),l=t.querySelector(".loader");let s=512,d=512;function r(e){const n=Array.prototype.slice.call(arguments,1);for(let t=0;t<e.length;++t)e[t].apply(null,n)}function u(){const e=c.getBoundingClientRect();return[Math.floor(e.width),Math.floor(e.height)]}!function(){function e(e){document.body.style.overflow=e?"hidden":"auto"}const t=n("side-pane-checkbox-id");o&&(window.addEventListener("load",function(){e(o.checked),o.addEventListener("change",function(){e(o.checked)})},!1),t&&o.addEventListener("change",function(){o.checked&&(t.checked=!1)},!1))}();let a=[0,0];const f=[];function h(e){return e+"px"}function g(){t.style.width="100vw";const e=u();o.checked?(t.style.height="100%",t.style["max-width"]="",t.style["max-height"]=""):(e[1]=e[0]*d/s,t.style.height=h(e[1]),t.style["max-width"]=h(s),t.style["max-height"]=h(d)),e[0]===a[0]&&e[1]===a[1]||(a=u(),r(f,a[0],a[1]))}window.addEventListener("load",g,!1),o.addEventListener("change",g,!1),window.addEventListener("resize",g,!1);const v=[];let m=!1;const w=[g],y=[],E=[],p=[],L=[],b=[],k=[],Y=[];if(o&&o.addEventListener("change",function(){r(w,o.checked)},!1),c){function X(e,n){const t=c.getBoundingClientRect();return[(e-t.left)/t.width,(n-t.top)/t.height]}function x(e,n){const t=X(e,n);v[0]=t[0],v[1]=t[1],m=!0,r(y)}function M(){m&&(m=!1,r(k))}function z(e,n){const t=X(e,n),c=t[0]-v[0],i=t[1]-v[1];v[0]=t[0],v[1]=t[1],m&&r(E,c,i),r(b,t[0],t[1])}c.addEventListener("mousedown",function(e){0===e.button&&x(e.clientX,e.clientY)},!1),c.addEventListener("mouseenter",function(){r(p)},!1),c.addEventListener("mouseleave",function(){r(L)},!1),c.addEventListener("wheel",function(e){return!(Y.length>0)||(r(Y,e.deltaY>0?1:-1),e.preventDefault(),!1)},!1),window.addEventListener("mousemove",function(e){z(e.clientX,e.clientY)}),window.addEventListener("mouseup",function(e){0===e.button&&M()});const e=[];let n=0;c.addEventListener("touchstart",function(t){const c=e.length,i=t.changedTouches;for(let n=0;n<i.length;++n){const t=i[n];let c=!1;for(let n=0;n<e.length;++n)if(t.identifier===e[n].id){c=!0;break}c||e.push({id:t.identifier,clientX:t.clientX,clientY:t.clientY})}if(0===c&&e.length>0){const n=e[0];x(n.clientX,n.clientY)}else if(2===e.length){const t=e[0],c=e[1],i=t.clientX-c.clientX,o=t.clientY-c.clientY;n=Math.sqrt(i*i+o*o)}},!1),window.addEventListener("touchend",function(n){const t=n.changedTouches;for(let n=0;n<t.length;++n){const c=t[n];for(let n=0;n<e.length;++n)c.identifier===e[n].id&&(e.splice(n,1),n--)}if(1===e.length){const n=X(e[0].clientX,e[0].clientY);v[0]=n[0],v[1]=n[1]}else 0===e.length&&M()}),window.addEventListener("touchmove",function(t){const c=t.changedTouches;for(let n=0;n<c.length;++n){const t=c[n];for(let n=0;n<e.length;++n)t.identifier===e[n].id&&(e[n].clientX=t.clientX,e[n].clientY=t.clientY)}if(m&&Y.length>0&&t.preventDefault(),1===e.length)z(e[0].clientX,e[0].clientY);else if(2===e.length){const t=e[0],c=e[1],i=t.clientX-c.clientX,o=t.clientY-c.clientY,l=Math.sqrt(i*i+o*o),s=(n-l)/n;n=l,r(Y,5*s)}},{passive:!1})}return Object.freeze({Observers:Object.freeze({canvasResize:f,fullscreenToggle:w,mouseDown:y,mouseDrag:E,mouseEnter:p,mouseLeave:L,mouseMove:b,mouseWheel:Y,mouseUp:k}),getAspectRatio:function(){const e=u();return e[0]/e[1]},getCanvas:function(){return c},getSize:u,getMousePosition:function(){return v},isFullScreen:function(){return o&&o.checked},isMouseDown:function(){return m},setIndicatorText:function(e,n){const t=e+"-indicator-id",c=document.getElementById(t);c?c.innerText=e+": "+n:console.error("Cannot find indicator '"+t+"'.")},setIndicatorsVisibility:function(e){document.getElementById("indicators").style.display=e?"block":"none"},setMaxSize:function(e,n){s=e,d=n,g()},setResizable:function(e){i.style.display=e?"block":"none"},showLoader:function(e){l&&(l.style.display=e?"block":"")},toggleFullscreen:function(e){if(o){e!=o.checked&&(o.checked=e,o.onchange())}}})}();
const Button=function(){function n(n){const t="button[id="+n+"]",e=document.querySelector(t);return e||console.error("Cannot find button '"+checkboxId+"'."),e}return Object.freeze({addObserver:function(t,e){const o=n(t);return!!o&&(o.addEventListener("click",function(n){n.stopPropagation(),e()},!1),!0)},setLabel:function(t,e){const o=n(t);o&&(o.innerText=e)}})}();
Canvas.setMaxSize(512,512);